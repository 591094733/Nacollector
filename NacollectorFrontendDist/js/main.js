/*!
 * NacollectorFrontend v1.0.0
 * (c) 2017-2019 qwqaq.com
 * Link: https://github.com/qwqcode/NacollectorFrontend
 */
(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"/7QA":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),i("y0MQ"),i("OAUx"),i("yC5p"),i("TN56"),i("8XVC")},"1WMa":function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});const s=i("Nhdc"),n=i("nu/M"),o=i("3Al5"),a=i("6yn5");e.default=class{constructor(){this.sidebarKey="setting"}init(){n.default.utilsReqIeProxy();let e=s.default.AppLayer.Sidebar.register(this.sidebarKey);e.setTitle("设置","#0089ff"),e.setWidth(360);let i=t('<div class="setting"></div>');o.default(this,(e,s)=>t(a.html`
        <div class="setting-group" data-setting-sidebar-group="${e}">
          <h2 class="setting-group-title">${s}</h2>
        </div>
      `).appendTo(i)),e.setInner(i)}get(t){let e=JSON.parse(localStorage.getItem("setting"))||{};return e.hasOwnProperty(t)?e[t]:null}set(t,e){let i=JSON.parse(localStorage.getItem("setting"))||{};i[t]=e,localStorage.setItem("setting",JSON.stringify(i))}getSidebar(){return s.default.AppLayer.Sidebar.get(this.sidebarKey)}}}).call(this,i("EVdn"))},"2H4V":function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});const s=i("Nhdc"),n=i("6yn5");e.Panel=class{constructor(){this.list={}}register(t,e){if(this.list.hasOwnProperty(t))throw Error(`导航栏面板： ${t} 已存在于list中`);let i=new o(t,e);return this.list[t]=i,i}get(t){return this.list.hasOwnProperty(t)?this.list[t]:null}};class o{constructor(e,i){this._isShow=!1,this._key=e,this._btnName=i,this._btnItem=s.default.AppNavbar.BtnBox.getBtnItem(this._btnName),this._btnElem=this._btnItem.getElem(),this._elem=t(n.html`<div class="navbar-panel anim-fade-in" data-navbar-panel="${e}" />`),this._btnElem.after(this._elem),this._btnElem.bind("click",()=>{this.toggle()})}getKey(){return this._key}getBtnName(){return this._btnName}getBtnElem(){return this._btnElem}getElem(){return this._elem}setTitle(e){t(n.html`<div class="panel-header"><div class="panel-title">${e}</div></div>`).prependTo(this._elem)}setInner(e){t(n.html`<div class="panel-inner"></div>`).appendTo(this._elem).append(e)}setSize(t,e){this._elem.css("width",`${t}px`),this._elem.css("height",`${e}px`)}setPosition(){let t=this._btnElem[0].getBoundingClientRect(),e=this._elem.outerWidth();this._elem.css("top",`${t.top-25}px`).css("left",`${t.right-e}px`)}show(){if(this._isShow)throw Error(`导航栏面板：${this._key} 已显示`);this.setPosition(),this._elem.addClass("show"),this._isShow=!0,setTimeout(()=>{t(document).bind("click.nav-panel-"+this._key,e=>{t(e.target).is(this._elem)||t(e.target).closest(this._elem).length||this.hide()})},20),t(window).bind("resize.nav-panel-"+this._key,()=>{this.setPosition()}),s.default.AppNavbar.BtnBox.getBtnItem(this._btnName).hideBadge()}hide(){if(!this._isShow)throw Error(`导航栏面板：${this._key} 未显示`);t(window).unbind("resize.nav-panel-"+this._key),t(document).unbind("click.nav-panel-"+this._key),this._elem.removeClass("show"),this._isShow=!1}toggle(){this._isShow?this.hide():this.show()}getIsShow(){return this._isShow}}e.PanelItem=o}).call(this,i("EVdn"))},"2fa4":function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});const s=i("Nhdc"),n=i("6yn5");e.default=class{currentInfoAdd(t,e,i,n){s.default.TaskGen.current.inputs[t]={label:e,inputSel:"#"+i},n&&(s.default.TaskGen.current.inputs[t].validator=n)}genBaseFormGroup(e,i){return t(`\n      <div class="form-group">\n      <label for="${e}">${i}</label>\n      </div>\n    `).appendTo(s.default.TaskGen.sel.form)}genBaseTextInput(e,i,s,n){let o=t(`\n      <input id="${e}" name="${i}" type="text"\n              class="form-control" autocomplete="off" spellcheck="false"\n              placeholder="输入文字" value="${n=n||""}">\n    `);return o.appendTo(this.genBaseFormGroup(e,s)),o}genBaseTextarea(e,i,s,o){return o=o||"",t(n.html`
      <textarea id="${e}" name="${i}" class="form-control" spellcheck="false" placeholder="输入文字"></textarea>
    `).html(o).appendTo(this.genBaseFormGroup(e,s))}textInput(t,e,i,s){let n="TaskGen_"+t,o=this.genBaseTextInput(n,t,e,i);return this.currentInfoAdd(t,e,n,s),o}numberInput(t,e,i,s,n){let o="TaskGen_"+t,a=this.genBaseTextInput(o,t,e,String(i||""));return a.attr("type","number"),a.attr("placeholder","输入数字"),s&&a.attr("min",s),n&&a.attr("max",n),this.currentInfoAdd(t,e,o),a}textareaInput(t,e,i,s){let n="TaskGen_"+t,o=this.genBaseTextarea(n,t,e,i);return s&&o.css("height",s),this.currentInfoAdd(t,e,n),o}selectInput(e,i,s,n){let o="TaskGen_"+e,a=`<select id="${o}" name="${e}" class="form-control">`;for(let[t,e]of Object.entries(s))a+=`<option value="${t="number"!=typeof t?t:e}" ${n&&t===n?"selected":""}>${e}</option>`;let l=t(a+="</select>");return l.appendTo(this.genBaseFormGroup(o,i)),this.currentInfoAdd(e,i,o),l}}}).call(this,i("EVdn"))},"3Al5":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i("Nhdc"),n=i("jpC5");e.default=(t,e)=>{let i=e("downloads","下载内容");new n.default(i).btnBlock("下载列表清空",()=>{s.default.Downloads.removeDataList(),s.default.AppLayer.Notify.success("下载列表已清空")});let o=e("downloads","网络配置");new n.default(o).btnToggle("采集请求跟随 IE 代理配置",()=>{s.default.AppAction.utilsReqIeProxy(!0)},()=>{s.default.AppAction.utilsReqIeProxy(!1)}).setVal(!!s.default.Setting.get("UtilsReqIeProxy"));let a=e("maintenance","维护");new n.default(a).btnBlock("日志文件清理",()=>{s.default.AppAction.logFileClear().then(()=>{s.default.AppLayer.Notify.success("日志文件已清理")})});new n.default(a).btnBlock("检查更新",()=>{s.default.AppUpdate.openPanel(),s.default.Setting.getSidebar().hide()});let l=e("about","关于"),r=new n.default(l).infoShow("主程序版本号","").find(".value");s.default.AppAction.tryGetVersion(t=>{r.text(t||"未知版本号")}),new n.default(l).infoShow("作者",'<a href="https://github.com/qwqcode" target="_blank">qwqcode</a>'),new n.default(l).infoShow("联系","1149527164@qq.com"),new n.default(l).infoShow("博客",'<a href="https://qwqaq.com" target="_blank">qwqaq.com</a>'),new n.default(l).infoShow("GitHub",'<a href="https://github.com/qwqcode/Nacollector" target="_blank">qwqcode/Nacollector</a>'),new n.default(l).infoShow("反馈问题",'<a href="https://github.com/qwqcode/Nacollector/issues" target="_blank">GitHub issue</a>'),new n.default(l).infoShow("",'<a href="https://raw.githubusercontent.com/qwqcode/Nacollector/master/LICENSE" target="_blank">您使用 Nacollector 即视为您已阅读并同意本《Nacollector 用户使用许可协议》的约束</a>'),new n.default(l).infoShow("",`<a href="https://github.com/qwqcode/Nacollector" target="_blank">Nacollector</a> Copyright (C) ${(new Date).getFullYear()} <a href="https://qwqaq.com" target="_blank">qwqaq.com</a>`)}},"8XVC":function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});const s=i("Nhdc");s.init();const n=window.AppWrapEl=t(".wrap");t(document).ready(()=>{s.default.AppNavbar.init(),t('[data-toggle="tooltip"]').tooltip(),setTimeout(()=>{t("body").css("opacity","1"),t(n).css("opacity","1")},10),s.default.TaskGen.init(),s.default.Task.taskManagerLayer.init(),t(s.default.TaskGen.sel.formToggleBtns+" a:nth-child(1)").click(),s.default.Downloads.init(),s.default.Setting.init(),s.default.AppAction.tryGetVersion(t=>{void 0!==t&&(s.default.AppAction.version=t)}),s.default.AppUpdate.init(),t(document).keydown(t=>{t.altKey&&123===t.keyCode&&s.default.AppAction.showDevTools()}),function(){const t=i("DlQD");let e=new t.Renderer;const s=e.link;e.link=function(t,i,n){const o=s.call(e,t,i,n);return o.replace(/^<a /,'<a target="_blank" ')},t.setOptions({renderer:e,pedantic:!1,gfm:!0,tables:!0,breaks:!0,sanitize:!1,smartLists:!0,smartypants:!0,xhtml:!1}),window.marked=t}()}),window.downloadFile=t=>{s.default.AppAction.downloadUrl(t)},window.saveLocalFile=t=>{console.log(t);let e="SLF_"+(new Date).getTime().toString();s.default.Downloads.addTask({key:e,fullPath:t,downloadUrl:"",totalBytes:0}),s.default.AppAction.saveLocalFile(t,e)},t.extend({getPosition:e=>{let i=e[0],s="BODY"===i.tagName,n=i.getBoundingClientRect();null===n.width&&(n=t.extend({},n,{width:n.right-n.left,height:n.bottom-n.top}));let o=SVGElement&&i instanceof SVGElement,a=s?{top:0,left:0}:o?null:e.offset(),l={scroll:s?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},r=s?{width:t(window).width(),height:t(window).height()}:null;return t.extend({},n,l,r,a)}})}).call(this,i("EVdn"))},Bbre:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});const s=i("2H4V"),n=i("DLEX"),o=i("J66h"),a=i("6yn5"),l=i("JU+6");e.default=class{constructor(){this.sel={nav:".top-nav-bar",navTitle:".top-nav-bar .nav-title"},this.BtnBox=new n.default,this.Panel=new s.Panel}init(){t(a.html`
      <div class="left-items">
        <div class="nav-title"></div>
      </div>
      <div class="right-items">
        <div class="nav-btn-box"></div>
      </div>
    `).appendTo(this.sel.nav),l.default()}setTitle(e,i){"boolean"==typeof i&&!0===i&&(e=o.Base64.decode(e));let s=this.sel.navTitle;t(s).addClass("changing"),setTimeout(()=>{t(s).text(e).removeClass("changing")},100)}getTitle(){return t(this.sel.navTitle).text()}}}).call(this,i("EVdn"))},DLEX:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i("WDHF"),n=i("nA5U");e.default=class{constructor(){this.sel={navBtns:".top-nav-bar .nav-btn-box"},this.groupList={}}groupAdd(t,e){let i;this.getGroup(t)?i=this.getGroup(t):(i=new s.default(t),this.groupList[t]=i);for(let[t,s]of Object.entries(e)){let e=new n.default(t,s.title,s.icon);"function"==typeof s.onClick&&e.getElem().click(()=>{s.onClick()}),e.getElem().tooltip(),i.addBtn(t,e)}return i}getGroup(t){return this.groupList.hasOwnProperty(t)?this.groupList[t]:null}getBtnGroup(t){let e=t.split(".");return e[0]?this.getGroup(e[0]):null}getBtnItem(t){let e=t.split(".");return e[0]&&e[1]?this.getGroup(e[0]).getBtn(e[1]):null}}},F2LS:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});const s=i("6yn5");e.default=class{constructor(e,i,n,o){0!==t(".dialog-layer").length&&t(".dialog-layer").remove(),this.dialogLayerEl=t('<div class="dialog-layer anim-fade-in" />').appendTo("body");let a=()=>{this.dialogLayerEl.addClass("anim-fade-out"),setTimeout(()=>{this.dialogLayerEl.hide()},200)};this.dialogEl=t(s.html`
    <div class="dialog-inner">
      <div class="dialog-title"><span class="title-text">${e}</span></div>
      <div class="dialog-content"></div>
    </div>
    `).appendTo(this.dialogLayerEl),this.dialogEl.find(".dialog-content").append(i);let l=(e,i)=>{let s=t(".dialog-bottom");s.length||(s=t('<div class="dialog-bottom"></div>').appendTo(this.dialogEl));let n=t('<a class="dialog-btn yes-btn"></a>');n.text(e),n.click(()=>{a(),"function"==typeof i&&i()}),n.appendTo(s)};if(n&&l(n[0]||"确定",n[1]),o&&l(o[0]||"取消",o[1]),!n&&!o){let e=t('<a class="right-btn close-btn"><i class="zmdi zmdi-close"></i></a>');e.appendTo(this.dialogEl.find(".dialog-title")),e.click(()=>{a()})}}getEl(){return this.dialogEl}getLayerEl(){return this.dialogLayerEl}}}).call(this,i("EVdn"))},GQIU:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i("F2LS"),n=i("jPKl"),o={Sidebar:new(i("n2kU").Sidebar),Dialog:s.default,Notify:n.default};e.default=o},HH9z:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});const s=i("Nhdc"),n=i("6yn5"),o=window.CrDownloadsCallBack;var a,l;!function(t){t[t.downloading=1]="downloading",t[t.pause=2]="pause",t[t.done=3]="done",t[t.cancelled=4]="cancelled",t[t.fail=5]="fail"}(a||(a={})),function(t){t[t.pause=1]="pause",t[t.resume=2]="resume",t[t.cancel=3]="cancel"}(l||(l={}));e.default=class{constructor(){this.navbarBtnName="main-btns.downloadManager",this.list={},this.itemElemList={},this.Status=a,this.Actions=l,this.sel={downloadsList:".download-list"},this.panelKey="downloads",this.localStorageKey="downloads"}init(){this.listElem=t('<div class="downloads-list"></div>');let e=s.default.AppNavbar.Panel.register(this.panelKey,this.navbarBtnName);e.setTitle('<i class="zmdi zmdi-download"></i> 下载列表'),e.setInner(this.listElem),e.setSize(400,430),this.restoreDataList()}addTask(t){this._addTask(t.key,t.fullPath,t.downloadUrl,t.totalBytes)}_addTask(e,i,n,o){if(this.list[e])throw Error(`${e} 下载任务已存在，无需再新建`);this.list[e]={fullPath:i,downloadUrl:n,totalBytes:o,receivedBytes:0,currentSpeed:0,status:0},this.itemElemList[e]=t(),s.default.AppNavbar.BtnBox.getBtnItem(this.navbarBtnName).showBadge()}updateTask(t){this._updateTask(t.key,t.receivedBytes,t.currentSpeed,t.status,t.fullPath,t.downloadUrl)}_updateTask(t,e,i,s,n,o){if(!this.list[t])throw Error(`${t} 下载任务不存在，或许已被删除`);this.list[t].receivedBytes=e,this.list[t].currentSpeed=i,this.list[t].status=s,""!==n&&this.list[t].fullPath!==n&&(this.list[t].fullPath=n),this.list[t].downloadUrl!==o&&(this.list[t].downloadUrl=o),this.updateItemUi(t),this.storeDataList()}updateItemUi(e){if(!this.list[e])throw Error(`${e} 下载任务不存在，或许已被删除`);let i=this.list[e],s=this.itemElemList[e];(!s||s&&0===s.length)&&((s=this.itemElemList[e]=t(n.html`
      <div class="download-item">
        <div class="details">
          <div class="header">
            <a class="file-name"></a>
            <a class="download-url"></a>
          </div>
          <div class="description"></div>
          <div class="progress"><div class="progress-bar"></div></div>
          <div class="action-bar"></div>
        </div>
        <div class="icon-wrapper">
          <button class="remove-btn" title="从列表中移除">✕</button>
        </div>
      </div>
      `).prependTo(this.listElem)).find(".download-url").text(i.downloadUrl),s.find(".file-name").click(()=>{this.fileLaunch(e)}),s.find(".download-url").click(()=>{this.urlOpenInDefaultBrowser(e)}),s.find(".remove-btn").click(()=>{this.taskRemove(e)}));let o=s.find(".file-name"),r=s.find(".progress"),d=s.find(".progress .progress-bar"),h=s.find(".description"),c=s.find(".action-bar");s.attr("dl-status")!==this.getStatusName(i.status)&&s.attr("dl-status",this.getStatusName(i.status)),o.text()!==this.extractFilename(i.fullPath)&&o.text(this.extractFilename(i.fullPath));let p=this.bytesToSize(i.currentSpeed)+"/s",u=this.bytesToSize(i.receivedBytes),f=this.bytesToSize(i.totalBytes),g=(i.receivedBytes/i.totalBytes*100).toFixed(2)+"%",m="",w=t();switch(i.status){case a.downloading:0!==i.totalBytes?(r.hasClass("indeterminate")&&r.removeClass("indeterminate"),d.css("width")!==g&&d.css("width",g),m=`${g}，速度 ${p}，已下载 ${u}，共 ${f}`):(r.hasClass("indeterminate")||r.addClass("indeterminate"),m=`速度 ${p}，已下载 ${u}`),(w=t(n.html`
        <span>
          <a class="btn-pause">暂停</a>
          <a class="btn-cancel">取消</a>
        </span>
        `)).find(".btn-pause").click(()=>{this.taskAction(e,l.pause)}),w.find(".btn-cancel").click(()=>{this.taskAction(e,l.cancel)});break;case a.pause:m=0!==i.totalBytes?`${g}，已下载 ${u}，共 ${f}`:`已下载 ${u}`,(w=t(n.html`
        <span>
          <a class="btn-resume">恢复</a>
          <a class="btn-cancel">取消</a>
        </span>
        `)).find(".btn-resume").click(()=>{this.taskAction(e,l.resume)}),w.find(".btn-cancel").click(()=>{this.taskAction(e,l.cancel)});break;case a.done:m=`总大小：${u}`,(w=t(n.html`<a>在文件夹中显示</a>`)).click(()=>{this.fileShowInExplorer(e)});break;case a.cancelled:case a.fail:(w=t(n.html`<a>重试下载</a>`)).click(()=>{this.downloadAgain(e)})}h.text()!==m&&h.text(m),w.html()!==c.html()&&(c.html(""),c.append(w))}taskAction(t,e){if(!this.list[t])throw Error(`任务操作失败，或许已被删除，未找到 ${t}`);o.downloadingTaskAction(t,e)}taskRemove(t){if(!this.list[t])throw Error(`任务从列表移除失败，或许已被删除，未找到 ${t}`);this.isTaskInProgress(t)&&o.downloadingTaskAction(t,l.cancel),this.itemElemList[t].hide(),delete this.list[t],this.storeDataList()}countDownloadingTask(){let t=0;for(let e in this.list)this.isTaskInProgress(e)&&t++;return t}storeDataList(){localStorage.setItem(this.localStorageKey,JSON.stringify(this.list))}restoreDataList(){let t=localStorage.getItem(this.localStorageKey);if(null===t)return;let e=JSON.parse(t);this.list={};for(let t in e)e.hasOwnProperty(t)&&(this.list[t]=e[t],this.isTaskInProgress(t)&&(this.list[t].status=a.cancelled),this.updateItemUi(t))}removeDataList(){for(let t in this.list)this.isTaskInProgress(t)&&this.taskAction(t,l.cancel);this.list={},this.listElem.find(".download-item").remove(),localStorage.setItem(this.localStorageKey,null),s.default.AppNavbar.BtnBox.getBtnItem(this.navbarBtnName).hideBadge()}fileLaunch(t){this.list[t]&&this.list[t].status===a.done&&o.fileLaunch(this.list[t].fullPath).then(e=>{e||(this.list[t].status=a.cancelled,this.updateItemUi(t))})}urlOpenInDefaultBrowser(t){this.list[t]&&o.urlOpenInDefaultBrowser(this.list[t].downloadUrl)}fileShowInExplorer(t){this.list[t]&&o.fileShowInExplorer(this.list[t].fullPath).then(e=>{e||(this.list[t].status=a.cancelled,this.updateItemUi(t))})}isTaskInProgress(t){return!!this.list[t]&&this.list[t].status!==a.done&&this.list[t].status!==a.cancelled}downloadAgain(t){if(!this.list[t])return!1;s.default.AppAction.downloadUrl(this.list[t].downloadUrl)}getStatusName(t){for(let e in a)if(a[e]===t)return e}extractFilename(t){let e=Math.max(t.lastIndexOf("\\"),t.lastIndexOf("/"));return t.substring(e+1)}bytesToSize(t){if(0===t)return"0 B";let e=Math.floor(Math.log(t)/Math.log(1e3));return(t/Math.pow(1e3,e)).toPrecision(3)+" "+["B","KB","MB","GB","TB","PB","EB","ZB","YB"][e]}}}).call(this,i("EVdn"))},"JU+6":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i("Nhdc");e.default=()=>{s.default.AppNavbar.BtnBox.groupAdd("main-btns",{taskManager:{icon:"assignment",title:"任务列表",onClick(){s.default.Task.taskManagerLayer.toggleLayer()}},downloadManager:{icon:"download",title:"下载列表"},setting:{icon:"settings",title:"设置",onClick(){s.default.Setting.getSidebar().toggle()}}}),s.default.AppNavbar.BtnBox.groupAdd("task-runtime",{backToTaskGen:{icon:"chevron-left",title:"返回任务生成器",onClick(){s.default.Task.hide()}},removeTask:{icon:"close",title:"删除任务",onClick(){s.default.Task.getCurrent().remove()}},showTaskInfo:{icon:"info",title:"任务详情",onClick(){s.default.Task.getCurrent()&&s.default.Task.getCurrent().showInfo()}}}).setMostLeft().hide()}},Nhdc:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});const s=i("Bbre"),n=i("Obeg"),o=i("ivxp"),a=i("HH9z"),l=i("YjUL"),r=i("1WMa"),d=i("GQIU"),h=i("a/AM"),c=i("nu/M"),p=i("jFZW"),u={AppNavbar:new s.default,TaskGen:new n.default,Task:new o.default,Downloads:new a.default,AppWidget:l,Setting:new r.default,AppLayer:d.default,AppUpdate:new h.default,AppAction:c.default,InputValidators:p.default};e.default=u,e.init=function(){window.$=t,window.AppNavbar=u.AppNavbar,window.TaskGen=u.TaskGen,window.Task=u.Task,window.Downloads=u.Downloads,window.AppWidget=u.AppWidget,window.Setting=u.Setting,window.AppLayer=u.AppLayer,window.AppUpdate=u.AppUpdate,window.AppAction=u.AppAction,window.InputValidators=u.InputValidators}}).call(this,i("EVdn"))},Obeg:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});const s=i("Nhdc"),n=i("6yn5"),o=i("2fa4");e.default=class{constructor(){this.sel={form:".taskgen-form",formToggle:".taskgen-form-toggle",formToggleDropdown:".taskgen-form-toggle .namespace-dropdown",formToggleBtns:".taskgen-form-toggle .classname-btns"},this.spiderList={},this.current={typeName:null,inputs:{}}}init(){this.dropdownDom=t(n.html`
      <div class="namespace-dropdown">
        <div class="dropdown-selected"></div>
        <ul class="dropdown-option anim-fade-in"></ul>
      </div>
    `).appendTo(this.sel.formToggle),this.dropdownSelectedDom=this.dropdownDom.find(".dropdown-selected"),this.dropdownOptionDom=this.dropdownDom.find(".dropdown-option"),this.dropdownBtnsDom=t('<div class="classname-btns"></div>').appendTo(this.sel.formToggle),this.dropdownSelectedDom.click(()=>{this.dropdownOptionShow()})}dropdownOptionShow(){this.dropdownOptionDom.addClass("show"),setTimeout(()=>{t(document).bind("click.dropdown-option",e=>{t(e.target).is(".dropdown-option")||t(e.target).closest(".dropdown-option").length||this.dropdownOptionHide()})},20)}dropdownOptionHide(){t(document).unbind("click.dropdown-option"),this.dropdownOptionDom.removeClass("show")}newSpiderType(t,e){this.spiderList[t]={_NamespaceInfo:{label:e}}}newSpider(t,e,i,s){if(!this.spiderList[t])throw Error("找不到该 Spider 类型："+t);this.spiderList[t][e]={label:i,genForm:s}}loadSpiderList(){this.dropdownOptionDom.html("");for(let[e,i]of Object.entries(this.spiderList)){let s=t(`<li data-namespace="${e}">${i._NamespaceInfo.label}</li>`);s.appendTo(this.dropdownOptionDom),s.click(()=>{this.dropdownBtnsDom.html("");for(let[s,n]of Object.entries(i)){if("_"===s.substr(0,1))continue;let i=e+"."+s,o=t(`<a>${n.label}</a>`).appendTo(this.dropdownBtnsDom);this.current.typeName&&this.current.typeName===i&&(this.dropdownBtnsDom.find("a").removeClass("active"),t(o).addClass("active")),o.click(()=>{this.formLoad(i),this.dropdownBtnsDom.find("a").removeClass("active"),o.addClass("active")})}this.dropdownSelectedDom.text(s.text()),this.dropdownSelectedDom.attr("data-namespace",e),this.dropdownOptionDom.find("li").removeClass("selected"),s.addClass("selected"),this.dropdownOptionHide()})}this.dropdownOptionDom.find("li:first-child").click(),this.dropdownBtnsDom.find("a:first-child").click()}spiderListGet(t){let e=t.split(".")||null;if(!e||!e[0]||!e[1])return null;let i=e[0],s=e[1];return this.spiderList.hasOwnProperty(i)&&this.spiderList[i].hasOwnProperty(s)?this.spiderList[i][s]:null}formLoad(e){if(!this.spiderListGet(e))throw Error("this.spiderList 中没有 "+e+"，无法创建表单！");let i=this.spiderListGet(e),a=t(this.sel.form);a.html(""),this.current.typeName=null,this.current.inputs={},this.current.typeName=e,i.genForm(new o.default),t(n.html`<div class="form-btns"><button class="submit-btn" type="submit">执行任务</button></div>`).appendTo(a).click(()=>!!this.formCheck()&&(s.default.Task.createTask(e,i.label,a.find(":input").serializeArray()),!1))}formCheck(){let e=!0;for(let[i,s]of Object.entries(this.current.inputs)){if(!s.inputSel||0===t(s.inputSel).length)throw Error(`表单输入元素 ${i} 的 Selector 无效`);let n=s.inputSel,o=t(n),a=t.trim(o.val().toString());if(""===a)return o.focus(),e=!1,!1;if(s.validator&&!s.validator(a))return o.addClass("has-error").focus(),o.bind("input propertychange",e=>{s.validator(t.trim(o.val().toString()))&&o.unbind("input propertychange").removeClass("has-error")}),e=!1,!1}return e}}}).call(this,i("EVdn"))},TN56:function(t,e,i){(function(t){!function(t){var e=function(t,e){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",t,e)};e.VERSION="3.3.7",e.TRANSITION_DURATION=150,e.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},e.prototype.init=function(e,i,s){if(this.enabled=!0,this.type=e,this.$element=t(i),this.options=this.getOptions(s),this.$viewport=this.options.viewport&&t(t.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var n=this.options.trigger.split(" "),o=n.length;o--;){var a=n[o];if("click"==a)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=a){var l="hover"==a?"mouseenter":"focusin",r="hover"==a?"mouseleave":"focusout";this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(r+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},e.prototype.getDefaults=function(){return e.DEFAULTS},e.prototype.getOptions=function(e){return(e=t.extend({},this.getDefaults(),this.$element.data(),e)).delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},e.prototype.getDelegateOptions=function(){var e={},i=this.getDefaults();return this._options&&t.each(this._options,function(t,s){i[t]!=s&&(e[t]=s)}),e},e.prototype.enter=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);if(i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),e instanceof t.Event&&(i.inState["focusin"==e.type?"focus":"hover"]=!0),i.tip().hasClass("in")||"in"==i.hoverState)i.hoverState="in";else{if(clearTimeout(i.timeout),i.hoverState="in",!i.options.delay||!i.options.delay.show)return i.show();i.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show)}},e.prototype.isInStateTrue=function(){for(var t in this.inState)if(this.inState[t])return!0;return!1},e.prototype.leave=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);if(i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),e instanceof t.Event&&(i.inState["focusout"==e.type?"focus":"hover"]=!1),!i.isInStateTrue()){if(clearTimeout(i.timeout),i.hoverState="out",!i.options.delay||!i.options.delay.hide)return i.hide();i.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide)}},e.prototype.show=function(){var i=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(i);var s=t.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(i.isDefaultPrevented()||!s)return;var n=this,o=this.tip(),a=this.getUID(this.type);this.setContent(),o.attr("id",a),this.$element.attr("aria-describedby",a),this.options.animation&&o.addClass("fade");var l="function"==typeof this.options.placement?this.options.placement.call(this,o[0],this.$element[0]):this.options.placement,r=/\s?auto?\s?/i,d=r.test(l);d&&(l=l.replace(r,"")||"top"),o.detach().css({top:0,left:0,display:"block"}).addClass(l).data("bs."+this.type,this),this.options.container?o.appendTo(this.options.container):o.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var h=this.getPosition(),c=o[0].offsetWidth,p=o[0].offsetHeight;if(d){var u=l,f=this.getPosition(this.$viewport);l="bottom"==l&&h.bottom+p>f.bottom?"top":"top"==l&&h.top-p<f.top?"bottom":"right"==l&&h.right+c>f.width?"left":"left"==l&&h.left-c<f.left?"right":l,o.removeClass(u).addClass(l)}var g=this.getCalculatedOffset(l,h,c,p);this.applyPlacement(g,l);var m=function(){var t=n.hoverState;n.$element.trigger("shown.bs."+n.type),n.hoverState=null,"out"==t&&n.leave(n)};t.support.transition&&this.$tip.hasClass("fade")?o.one("bsTransitionEnd",m).emulateTransitionEnd(e.TRANSITION_DURATION):m()}},e.prototype.applyPlacement=function(e,i){var s=this.tip(),n=s[0].offsetWidth,o=s[0].offsetHeight,a=parseInt(s.css("margin-top"),10),l=parseInt(s.css("margin-left"),10);isNaN(a)&&(a=0),isNaN(l)&&(l=0),e.top+=a,e.left+=l,t.offset.setOffset(s[0],t.extend({using:function(t){s.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),s.addClass("in");var r=s[0].offsetWidth,d=s[0].offsetHeight;"top"==i&&d!=o&&(e.top=e.top+o-d);var h=this.getViewportAdjustedDelta(i,e,r,d);h.left?e.left+=h.left:e.top+=h.top;var c=/top|bottom/.test(i),p=c?2*h.left-n+r:2*h.top-o+d,u=c?"offsetWidth":"offsetHeight";s.offset(e),this.replaceArrow(p,s[0][u],c)},e.prototype.replaceArrow=function(t,e,i){this.arrow().css(i?"left":"top",50*(1-t/e)+"%").css(i?"top":"left","")},e.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},e.prototype.hide=function(i){var s=this,n=t(this.$tip),o=t.Event("hide.bs."+this.type);function a(){"in"!=s.hoverState&&n.detach(),s.$element&&s.$element.removeAttr("aria-describedby").trigger("hidden.bs."+s.type),i&&i()}if(this.$element.trigger(o),!o.isDefaultPrevented())return n.removeClass("in"),t.support.transition&&n.hasClass("fade")?n.one("bsTransitionEnd",a).emulateTransitionEnd(e.TRANSITION_DURATION):a(),this.hoverState=null,this},e.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},e.prototype.hasContent=function(){return this.getTitle()},e.prototype.getPosition=function(e){var i=(e=e||this.$element)[0],s="BODY"==i.tagName,n=i.getBoundingClientRect();null==n.width&&(n=t.extend({},n,{width:n.right-n.left,height:n.bottom-n.top}));var o=window.SVGElement&&i instanceof window.SVGElement,a=s?{top:0,left:0}:o?null:e.offset(),l={scroll:s?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},r=s?{width:t(window).width(),height:t(window).height()}:null;return t.extend({},n,l,r,a)},e.prototype.getCalculatedOffset=function(t,e,i,s){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-i/2}:"top"==t?{top:e.top-s,left:e.left+e.width/2-i/2}:"left"==t?{top:e.top+e.height/2-s/2,left:e.left-i}:{top:e.top+e.height/2-s/2,left:e.left+e.width}},e.prototype.getViewportAdjustedDelta=function(t,e,i,s){var n={top:0,left:0};if(!this.$viewport)return n;var o=this.options.viewport&&this.options.viewport.padding||0,a=this.getPosition(this.$viewport);if(/right|left/.test(t)){var l=e.top-o-a.scroll,r=e.top+o-a.scroll+s;l<a.top?n.top=a.top-l:r>a.top+a.height&&(n.top=a.top+a.height-r)}else{var d=e.left-o,h=e.left+o+i;d<a.left?n.left=a.left-d:h>a.right&&(n.left=a.left+a.width-h)}return n},e.prototype.getTitle=function(){var t=this.$element,e=this.options;return t.attr("data-original-title")||("function"==typeof e.title?e.title.call(t[0]):e.title)},e.prototype.getUID=function(t){do{t+=~~(1e6*Math.random())}while(document.getElementById(t));return t},e.prototype.tip=function(){if(!this.$tip&&(this.$tip=t(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},e.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},e.prototype.enable=function(){this.enabled=!0},e.prototype.disable=function(){this.enabled=!1},e.prototype.toggleEnabled=function(){this.enabled=!this.enabled},e.prototype.toggle=function(e){var i=this;e&&((i=t(e.currentTarget).data("bs."+this.type))||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i))),e?(i.inState.click=!i.inState.click,i.isInStateTrue()?i.enter(i):i.leave(i)):i.tip().hasClass("in")?i.leave(i):i.enter(i)},e.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type),t.$tip&&t.$tip.detach(),t.$tip=null,t.$arrow=null,t.$viewport=null,t.$element=null})};var i=t.fn.tooltip;t.fn.tooltip=function(i){return this.each(function(){var s=t(this),n=s.data("bs.tooltip"),o="object"==typeof i&&i;!n&&/destroy|hide/.test(i)||(n||s.data("bs.tooltip",n=new e(this,o)),"string"==typeof i&&n[i]())})},t.fn.tooltip.Constructor=e,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=i,this}}(t)}).call(this,i("EVdn"))},WDHF:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});const s=i("Nhdc");e.default=class{constructor(e){this._elem=t(`<div class="btn-group" data-nav-btn-group="${e}"></div>`).appendTo(s.default.AppNavbar.BtnBox.sel.navBtns),this._groupName=e,this._btnList={}}setMostLeft(){return this._elem.insertBefore(t(s.default.AppNavbar.BtnBox.sel.navBtns+" .btn-group:first-child")),this}setMostRight(){return this._elem.insertAfter(t(s.default.AppNavbar.BtnBox.sel.navBtns+" .btn-group:last-child")),this}getElem(){return this._elem}getGroupName(){return this._groupName}show(){return this._elem.show(),this}hide(){return this._elem.hide(),this}getBtnList(){return this._btnList}addBtn(t,e){return this._btnList[t]=e,e.getElem().appendTo(this._elem),e}getBtn(t){return this._btnList[t]?this._btnList[t]:null}}}).call(this,i("EVdn"))},YjUL:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});const s=i("6yn5");e.loadingIndicator=function(e){return t(s.html`
    <div class="loading-indicator" style="opacity: .9;">
      <div class="inner">
        <svg viewBox="25 25 50 50"><circle cx="50" cy="50" r="20" fill="none" stroke-width="2" stroke-miterlimit="10"></circle></svg>
      </div>
    </div>
    `).prependTo(e),{remove(){t(e).find(".loading-indicator").remove()}}},e.floatImg=function(e,i){if(0!==t("body .widget-float-img").length)return;let n=t(e),o=n[0].getBoundingClientRect();setTimeout(()=>{if(0===t(":hover").filter(n).length)return;let e=o.left,a=o.top;a=o.top>=window.AppWrapEl.height()-o.bottom?a-250-10:a+n.height()+10;let l=t(s.html`<div class="widget-float-img anim-fade-in" style="left: ${e}px; top: ${a}px;"></div>`).appendTo("body"),r=this.loadingIndicator(l),d=t(s.html`<img src="${i}" class="anim-fade-in" style="display: none;">`).appendTo(l);d.on("load",()=>{r.remove(),d.show()}),n.on("mouseout",t=>{l.remove()})},200)}}).call(this,i("EVdn"))},"a/AM":function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});const s=i("Nhdc"),n=i("jPKl"),o=i("c78X"),a=window.AppConfig,l=window.UpdateAction||{};e.default=class{constructor(){this.moduleVersionList={}}async init(){let t;try{t=JSON.parse(await l.getUpdateParms())}catch(t){return void console.error("UpdateParms 获取失败")}window.AppConfig.updateCheckUrl=t.updateCheckUrl,window.AppConfig.updateCheckToken=t.updateCheckToken,await this.refreshModuleVersionList(),this.reqUpdates(t=>{this.isNeedUpdate(t)&&this.openPanel(t)})}async refreshModuleVersionList(){try{this.moduleVersionList=await l.getAllModuleVersion()}catch(t){console.error("模块版本号列表刷新失败")}}openPanel(t=null){this.panel=new o.default(t),null===t?(this.panel.setLoading(!0),this.reqUpdates(t=>{this.panel.setLoading(!1),this.panel.updateRemoteData(t)})):this.panel.updateRemoteData(t)}getPanel(){return this.panel}isNeedUpdate(t){let e=this.moduleVersionList,i=t.modules,s=!1;for(let t in i){let n=i[t].name;this.moduleVersionList.hasOwnProperty(n)&&!this.isHigherVersion(e[n],i[t].version)||(s=!0)}return s}startUpdate(t,e){this.isNeedUpdate(t)?s.default.Task.isTaskRunning()?n.default.error("在更新之前，请先终止正在运行的任务"):this.panel.setIsUpdating({onUiReady:async()=>{let e=[];for(let i in t.modules){let s=t.modules[i],n=s.version||"",o=this.moduleVersionList[s.name]||"";this.moduleVersionList.hasOwnProperty(s.name)&&!this.isHigherVersion(o,n)||e.push(s)}e.length<=0?n.default.error("更新失败，升级数据不可用"):await l.startUpdateWork(JSON.stringify(e))}}):n.default.success("无需更新")}reqUpdates(e){t.ajax({type:"GET",url:a.updateCheckUrl,dataType:"json",data:{token:a.updateCheckToken,time:(new Date).getTime()},beforeSend(){},success(t){e&&e(t)},error(){e&&e(null),s.default.AppLayer.Notify.error("更新信息获取失败")}})}isHigherVersion(t,e,i=!1){let s;""===t&&(t="0.0.0.0");try{let i=t.split("."),n=e.split("."),o=Math.min(i.length,n.length),a=0;for(s=0;a<o&&0==(s=parseInt(n[a])-parseInt(i[a]));)a++}catch(i){console.error("版本号错误，无法比较",t,e)}return i?s>=0:s>0}}}).call(this,i("EVdn"))},b7ok:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});const s=i("Nhdc"),n=i("6yn5"),o=window.TaskController;e.default=class{constructor(e,i,o,a){this.isInProgress=!0,this.allowAutoScrollToBottom=!0,this._taskId=e,this._typeName=i,this._classLabel=o,this._parmsObj=a,this._taskItemSel=`[data-task-id="${e}"]`,this._taskLogTableSel=`${this._taskItemSel} .task-log-table`,this._elem=t(n.html`
      <div class="task-item" data-task-id="${e}" style="display: none">
        <div class="container" style="width: 95%;">
        <div class="task-log-table"></div>
      </div>
    `).appendTo(s.default.Task.sel.runtime)}getId(){return this._taskId}getTypeName(){return this._typeName}getClassLabel(){return this._classLabel}getParmsObj(){return this._parmsObj}setTitle(){s.default.AppNavbar.setTitle(this.getTitle())}getTitle(){return`${this.getClassLabel()} 任务ID：${this.getId()}`}setOriginalTitle(){s.default.AppNavbar.setTitle("")}show(){s.default.Task.show(this.getId())}hide(){s.default.Task.hide()}showInfo(){new s.default.AppLayer.Dialog("任务信息",`ID：${this.getId()}<br>`+`标题：${this.getTitle()}<br><br>`+`调用类标签：${this.getClassLabel()}<br>`+`调用类名：${this.getTypeName()}<br><br>`+`执行开始时间：${new Date(parseInt(this.getId()))}<br><br>`+`参数：${JSON.stringify(this.getParmsObj())}`)}log(e,i){let s=t('<div class="line" style="display: none" />'),n={I:"消息",S:"成功",W:"警告",E:"错误"},o="";n[i]&&(s.attr("data-level",i),o+=`<span class="tag">[${n[i]}]</span> `),o+=(t=>t.replace(/\n/g,"<br/>"))(e),s.html(o),s.appendTo(this._taskLogTableSel),s.css("display",""),this.scrollToBottom()}scrollToBottom(){t(s.default.Task.sel.runtime).scrollTop(t(s.default.Task.sel.runtime)[0].scrollHeight)}remove(){this.getIsInProgress()?new s.default.AppLayer.Dialog("删除任务",`任务 “${this.getTitle()}” 正在执行中...`,["中止并删除任务",()=>{try{o.abortTask(this.getId()).then(t=>{t?this._remove():s.default.AppLayer.Notify.error("任务中止失败")})}catch(t){throw s.default.AppLayer.Notify.error("任务中止失败"),t}}],["取消",()=>{}]):this._remove()}_remove(){s.default.Task.getCurrent()&&s.default.Task.getCurrent().getId()===this.getId()&&this.hide(),delete s.default.Task.list[this.getId()],s.default.Task.taskManagerLayer.removeItem(this.getId()),s.default.AppLayer.Notify.success("任务删除成功")}taskIsEnd(){this.isInProgress=!1}getIsInProgress(){return this.isInProgress}getSel(){return this._taskItemSel}getLogTableSel(){return this._taskLogTableSel}}}).call(this,i("EVdn"))},c78X:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});const s=i("6yn5"),n=i("Nhdc"),o=i("F2LS");e.default=class{constructor(e){return this.isUpdating=!1,this.remoteData=e,this.elem=t(s.html`<div class="update-manager"></div>`),this.dialogElem=new o.default("Nacollector 版本管理器",this.elem).getEl().addClass("dialog-large"),this}getElem(){return this.elem}updateRemoteData(t){this.remoteData=t,this.render(this.remoteData)}setLoading(e){e?t(s.html`<div class="update-manager-loading"><div class="loading-css-icon"></div> 数据获取中...</div>`).appendTo(this.elem):this.elem.find(".update-manager-loading").remove()}setIsUpdating(t){this.isUpdating?console.error("已开始升级，无需重复调用 setIsUpdating"):(this.isUpdating=!0,this.dialogElem.find(".close-btn").hide(),this.elem.find(".update-btn").hide(),this.setProgress(0,"正在准备更新..."),t.onUiReady())}setProgress(t,e=null){this.isUpdating?(null!==e&&this.elem.find(".update-status-text").show().html(e),this.elem.find(".update-progress-bar-wrap").show().find(".update-progress-bar").css("width",`${t}%`)):console.error("AppUpdatePanel.setProgress 方法不可用，因为未在升级")}setSuccess(t){this.setResult(!0,t)}setError(t){this.setResult(!1,t)}setResult(e,i){this.isUpdating=!1,this.dialogElem.find(".close-btn").show(),this.elem.html(""),t(s.html`
      <div class="update-result ${e?"is-success":""}">
        <div class="icon"><i class="zmdi zmdi-${e?"check":"alert-triangle"}"></i></div>
        <div class="status">${e?"升级成功":"升级失败"}</div>
        <div class="desc"></div>
      </div>
    `).appendTo(this.elem).find(".desc").html(i)}render(e){this.elem.find(".module-list-wrap").remove();let i=t(s.html`<div class="module-list-wrap"></div>`).appendTo(this.elem),o=t(s.html`<div class="action-bar"></div>`).appendTo(i);t(s.html`<a class="dialog-btn update-btn"><i class="zmdi zmdi-cloud-upload"></i> 一键升级</a>`).appendTo(o).click(()=>{n.default.AppUpdate.startUpdate(this.remoteData,n.default.AppUpdate.moduleVersionList)});let a=t(s.html`<div class="update-status-text"></div>`).appendTo(o),l=t(s.html`<div class="update-progress-bar-wrap" style="display: none;"></div>`).appendTo(o),r=(t(s.html`<div class="update-progress-bar"></div>`).appendTo(l),t(s.html`<div class="update-note"></div>`).appendTo(i)),d="";for(let t in this.remoteData.release_notes)n.default.AppUpdate.isHigherVersion(n.default.AppUpdate.moduleVersionList.Nacollector,t,!0)&&(d+=`#### ${t}\n${this.remoteData.release_notes[t]}\n\n`);r.html(`<h2 class="update-note-title">发行说明</h2>${window.marked(d)}`);let h=[],c=t(s.html`<div class="module-list"></div>`).appendTo(i),p=this.remoteData.modules,u={Nacollector:"zmdi-picture-in-picture",NacollectorSpiders:"zmdi-cloud-box",NacollectorUpdater:"zmdi-arrow-merge"};for(let e in p){let i=p[e],o=i.name,a=n.default.AppUpdate.moduleVersionList[o]||"",l=i.version||"",r=n.default.AppUpdate.isHigherVersion(a,l);r&&h.push(o);let d=t(s.html`
        <div class="module-item">
          <div class="icon">
            <i class="zmdi ${u[o]||"zmdi-puzzle-piece"}"></i>
          </div>
          <div class="info">
            <div class="name"></div>
            <div class="desc"></div>
            <div class="badge-box">
              <div class="badge ${r?"need":"no-need"}">${r?"待升级":"无需升级"}</div>
            </div>
          </div>
        </div>
      `).appendTo(c);d.find(".info > .name").text(o),d.find(".info > .desc").html(s.html`
      <span>本地: ${a||"无"}</span>
      <span class="${r?"marked-text":""}">远程: ${l}</span>
      <span class="${r?"marked-text":""}">大小: ${i.size}</span>`)}a.text(h.length>0?`待更新模块: ${h.join(", ")}`:"无更新")}}}).call(this,i("EVdn"))},ivxp:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});const s=i("Nhdc"),n=i("J66h"),o=i("b7ok"),a=i("pIyW"),l=window.TaskController;e.default=class{constructor(){this.sel={runtime:".task-runtime"},this.list={},this.currentDisplayedId=null,this.taskManagerLayer=new a.default}createTask(t,e,i){let n=(new Date).getTime().toString(),a=new o.default(n,t,e,i);this.list[n]=a,a.show(),this.taskManagerLayer.addItem(n);try{l.createTask(n,t,e,JSON.stringify(i)).then(t=>{})}catch(t){throw s.default.AppLayer.Notify.error("创建任务失败"),t}return a}get(t){return this.list.hasOwnProperty(t)?this.list[t]:null}getCurrent(){return this.get(this.currentDisplayedId)?this.get(this.currentDisplayedId):null}show(e){if(!this.get(e))throw Error(`未找到任务 ${e}`);null!==this.getCurrent()&&this.hide();let i=this.get(e),n=this.sel.runtime,o=i.getSel();t(o).show(),t(n).show(),t(n).on("scroll",()=>{i.allowAutoScrollToBottom=!1,t(i.getSel()+" > .container").innerHeight()===t(n).height()+t(n).scrollTop()&&(i.allowAutoScrollToBottom=!0)}),i.setTitle(),s.default.AppNavbar.BtnBox.getBtnGroup("task-runtime").show(),this.currentDisplayedId=e}hide(){if(null===this.currentDisplayedId)throw Error("未显示任何任务");let e=this.sel.runtime,i=this.getCurrent().getSel();t(e).hide(),t(e).off("scroll"),t(i).hide(),this.getCurrent().setOriginalTitle(),s.default.AppNavbar.BtnBox.getBtnGroup("task-runtime").hide(),this.currentDisplayedId=null}log(t,e,i,s,o){if(!this.get(t))throw Error(`未找到任务 ${t}`);"boolean"==typeof o&&!0===o&&(e=n.Base64.decode(e)),this.get(t).log(e,i)}isTaskRunning(){let t=!1;for(let e in this.list)if(this.list[e].getIsInProgress()){t=!0;break}return t}}}).call(this,i("EVdn"))},jFZW:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s={isEmail(t){if(null===t||""===t)return!1;return!!t.match(/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/)},isQq(t){if(null===t||""===t)return!1;return!!t.match(/^[1-9]\d{4,12}$/)},isEnglish(t){if(null===t||""===t)return!1;return!!t.match(/^[A-Za-z]+$/)},isInteger(t){if(null===t||""===t)return!1;return!!t.match(/^[-\\+]?\d+$/)},isDouble(t){if(null===t||""===t)return!1;return!!t.match(/^[-\\+]?\d+(\.\d+)?$/)},isUrl(t){if(null===t||""===t)return!1;return!!t.match(/^(http|https):\/\/[A-Za-z0-9]+\.[A-Za-z0-9]+[\\\/=\\?%\-&_~`@[\]\\’:+!]*([^<>\\"])*$/)}};e.default=s},jPKl:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});const s=i("6yn5");e.default={success(t){this.show(t,"s")},error(t){this.show(t,"e")},show(e,i,n){n="number"==typeof n?n:2e3;let o=t(".notify-layer");o.length||(o=t('<div class="notify-layer" />').appendTo("body"));let a,l=t(s.html`
    <div class="notify-item anim-fade-in ${i?"type-"+i:""}">
      <p class="notify-content">${e}</p>
    </div>
  `).prependTo(o),r=()=>{l.addClass("anim-fade-out"),setTimeout(()=>{l.remove()},200)};n>0&&(a=setTimeout(()=>{r()},n)),l.click(()=>{r(),clearTimeout(a)})}}}).call(this,i("EVdn"))},jpC5:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});const s=i("6yn5");e.default=class{constructor(e){return this._elem=t('<div class="setting-item"></div>').appendTo(e),this._groupDom=e,this}getElem(){return this._elem}btnBlock(e,i){return t(`<button type="button" class="setting-btn-block">${e}</button>`).click(()=>{i()}).appendTo(this._elem)}btnToggle(e,i,n){let o=t(s.html`
        <button type="button" class="setting-btn-block setting-btn-toggle">
          <div class="left-text">${e}</div>
          <div class="toggle">
            <div class="toggle-bar"></div>
            <div class="toggle-button"></div>
          </div>
        </button>`),a=o.find(".toggle"),l={setVal(t){t?a.addClass("turn-on"):a.removeClass("turn-on")},setOn(){l.setVal(!0)},setOff(){l.setVal(!1)},toggle(){a.hasClass("turn-on")?(a.removeClass("turn-on"),n()):(a.addClass("turn-on"),i())},getDom:()=>o};return o.click(()=>{l.toggle()}),o.appendTo(this._elem),l}infoShow(e,i){return t(s.html`
          <div class="two-line">
            <span class="label">${e}</span>
            <span class="value">${i}</span>
          </div>
        `).appendTo(this._elem)}}}).call(this,i("EVdn"))},n2kU:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});const s=i("6yn5");e.Sidebar=class{constructor(){this.list={},this.currentDisplayedKey=null}register(t){if(this.list.hasOwnProperty(t))throw Error(`侧边栏层：${t} 已存在于list中`);let e=new n(this,t);return this.list[t]=e,e}get(t){return this.list.hasOwnProperty(t)?this.list[t]:null}};class n{constructor(e,i){this._sidebar=e,this._key=i,this._elem=t(s.html`<div class="sidebar-block" data-sidebar-layer-key="${i}" />`),this._elem.appendTo(this.getLayerElem()),this._width=360}getKey(){return this._key}getElem(){return this._elem}setTitle(e,i){let n=t(s.html`
      <div class="sidebar-header">
        <div class="header-left">${e}</div>
        <div class="header-right">
          <button type="button" data-toggle="sidebar-layer-hide"><i class="zmdi zmdi-close"></i></button>
        </div>
      </div>
    `);i&&n.css("background",i),n.prependTo(this._elem),this._elem.find('[data-toggle="sidebar-layer-hide"]').click(()=>{this.hide()})}setInner(e){t('<div class="sidebar-inner"></div>').appendTo(this._elem).append(e)}setWidth(t){void 0!==t&&(this._width=t),this._elem.css("width",`${this._width}px`).css("transform",`translate(${this._width}px, 0px)`)}show(){if(null!==this._sidebar.currentDisplayedKey&&this._sidebar.currentDisplayedKey!==this.getKey()&&this._sidebar.get(this._sidebar.currentDisplayedKey).hide(),this._sidebar.currentDisplayedKey===this.getKey())throw Error("侧边栏层："+this.getKey()+" 已显示");t(this.getLayerElem()).hasClass("show")||t(this.getLayerElem()).addClass("show"),this.setWidth(),this._elem.css("transform",`translate(${this._elem.width()+10}px, 0px)`).addClass("show"),t("body").css("overflow","hidden"),0!==t(".sidebar-layer > .sidebar-block.show").length&&this._elem.insertAfter(t(".sidebar-layer > .sidebar-block.show:last-child")),setTimeout(()=>{t(document).bind("click.sidebar-layer-"+this.getKey(),e=>{!t(e.target).is(this.getLayerElem())&&t(e.target).closest(this.getLayerElem()).length||this.hide()})},20),this._sidebar.currentDisplayedKey=this.getKey()}hide(){if(null===this._sidebar.currentDisplayedKey||this._sidebar.currentDisplayedKey!==this.getKey())throw Error("侧边栏层："+this.getKey()+" 未显示");this._elem.removeClass("show"),0===t(".sidebar-layer > .sidebar-block.show").length&&(t(this.getLayerElem()).removeClass("show"),t("body").css("overflow","")),t(document).unbind("click.sidebar-layer-"+this.getKey()),this._sidebar.currentDisplayedKey=null}toggle(){this.isShow()?this.hide():this.show()}isShow(){return t(this.getLayerElem()).hasClass("show")&&this._elem.hasClass("show")}getInnerElem(){return this._elem.find(".sidebar-inner")}getLayerElem(){let e=t(".sidebar-layer");return 0===e.length&&(e=t('<div class="sidebar-layer" />').appendTo("body")),e}}e.SidebarItem=n}).call(this,i("EVdn"))},nA5U:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});const s=i("6yn5");e.default=class{constructor(e,i,n){this._name=e,this._label=i,this._icon=n,this._elem=t(s.html`
        <a data-placement="bottom" title="${this._label}">
          <i class="zmdi zmdi-${this._icon}"></i>
        </a>
      `)}getName(){return this._name}getLabel(){return this._label}getIcon(){return this._icon}getElem(){return this._elem}showBadge(){return this._elem.addClass("show-top-badge"),this}hideBadge(){return this._elem.removeClass("show-top-badge"),this}}}).call(this,i("EVdn"))},"nu/M":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i("Nhdc"),n=i("jPKl"),o=Object.assign(window.AppAction||{},{utilsReqIeProxy(t){void 0===t&&(t=!!s.default.Setting.get("UtilsReqIeProxy")),s.default.Setting.set("UtilsReqIeProxy",t);try{o._utilsReqIeProxy(t)}catch(t){console.error("AppAction._utilsReqIeProxy 调用失败")}},tryGetVersion(t){try{o.getVersion().then(t)}catch(e){console.error("AppAction.getVersion 调用失败"),t(void 0)}},onExitBtnClick(){if(s.default.AppUpdate.panel&&s.default.AppUpdate.panel.isUpdating)return void n.default.error("Nacollector 正在升级中，暂时无法退出，请稍等片刻");let t=s.default.Downloads.countDownloadingTask()||0;if(t>0){new s.default.AppLayer.Dialog("退出 Nacollector",`有 ${t} 个下载任务仍在继续！是否结束下载并退出 Nacollector？`,["确定",()=>{o.appClose()}],["取消"])}else try{o.appClose()}catch(t){console.error("AppAction.appClose 调用失败")}}});e.default=o},pIyW:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});const s=i("Nhdc"),n=i("6yn5");e.default=class{init(){let t=s.default.AppLayer.Sidebar.register("taskManager");t.setTitle("任务列表","#4265c7"),t.setWidth(450),t.setInner('<div class="task-manager"></div>')}getItemSel(t){return'[data-taskmanager-taskid="'+t+'"]'}addItem(e){if(!s.default.Task.get(e))throw Error("未找到此任务 "+e);let i=s.default.Task.get(e),o=t(n.html`
      <div class="task-item" data-taskmanager-taskid="${e}">
        <div class="left">
          <i class="zmdi zmdi-view-carousel" data-toggle="task-show"></i>
        </div>
        <div class="right">
          <h2 class="task-title" data-toggle="task-show">${i.getClassLabel()}</h2>
          <p class="task-desc"><span class="task-id">任务ID：${e}</span></p>
          <div class="action-bar">
            <a class="action-btn" data-toggle="task-show"><i class="zmdi zmdi-layers"></i> 显示</a>
            <a class="action-btn" data-toggle="task-remove"><i class="zmdi zmdi-close"></i> 删除</a>
          </div>
        </div>
      </div>`);o.find('[data-toggle="task-show"]').click(()=>{s.default.Task.show(e)}),o.find('[data-toggle="task-remove"]').click(()=>{s.default.Task.get(e).remove()}),o.prependTo(this.getLayer().getElem().find(".task-manager"))}removeItem(e){if(0===t(this.getItemSel(e)).length)throw Error(`未找到此任务 ${e}`);setTimeout(()=>{t(this.getItemSel(e)).remove()},20)}toggleLayer(){this.getLayer().toggle()}getLayer(){return s.default.AppLayer.Sidebar.get("taskManager")}}}).call(this,i("EVdn"))},y0MQ:function(t,e,i){},yC5p:function(t,e){var i,s,n,o,a;i=window,s={},n=[{listener:null,exceptions:[]}],o=Node.prototype.addEventListener,a=Node.prototype.removeEventListener,Object.defineProperty(Node.prototype,"onoutclick",{set:function(t){return n[0]={exceptions:[this],listener:t&&t.bind(this)},t}}),i.Node.prototype.addEventListener=function(t,e,i){if("outclick"==t){for(var a;s[a=(1e5*Math.random()).toString()];);return s[a]=e,(i=i||[]).push(this),n.push({exceptions:i,listener:e&&e.bind(this),id:a}),a}o.apply(this,arguments)},i.document.addEventListener("click",function(t){for(var e=n.length;e--;){for(var i=n[e],s=!1,o=i.exceptions.length;o--;)if(i.exceptions[o].contains(t.target)){s=!0;break}s||i.listener&&i.listener(t)}}),i.Node.prototype.removeEventListener=function(t,e){if("outclick"==t){var i=-1;if("function"==typeof e){for(o in s)if(e.toString()==s[o].toString()){i=o;break}}else i=e;for(var o=n.length;o--;)if(n[o].id==i){n.splice(o,1);break}}else a.apply(this,arguments)},i=document.querySelectorAll("[outclick]"),[].forEach.call(i,function(t){var e=t.getAttribute("outclick");e=Function(e),n.push({listener:e,exceptions:[t]})})}},[["/7QA",1,2]]]);